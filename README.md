# Data Analysis for Strava and Garmin Connect

Work in progress. Project working with Strava and Garmin Connect data in various ways, aiming to analyse, process and transform activities.

## Ideas for Later, Components to Implement

- Add to task in Todoist if one already exists, instead of making new one?
- Fix and complete GitHub workflow to upload activities to Garmin Connect?
- Remove default gear when uploading virtual ride activities to Garmin Connect?
- Implement functionality to update calendar notes using AppleScript?
- Implement functionality to create Todoist task suggesting updating gear in Garmin Connect if calendar description contains certain words, such as for a speed run?
- More elaborate secret management, use Azure? GitHub?
- Fix formatting for plots and outputs generated by Garmin Connect?
- Allow the user to get some customised report on their data fra Garmin Connect?

## Requirements

- Python â‰¥ 3.10, as this is required by GarminConnect
- ChromeDriver, which can be installed for example via Homebrew
- Strava developer app, created at <https://www.strava.com/settings/api>

## Create a Virtual Environment

```bash
python3.11 -m venv .venv
source .venv/bin/activate
```

## Install the Requirements

```bash
pip install -r requirements.txt
```

## Configure Environment Variables

Set the following environment variables, as they will be needed to run the project scripts:

```bash
MOWL_USER="YOUR-WOWL-EMAIL"
MOWL_PASS="YOUR-MOWL-PASSWORD"
GARMIN_USER="YOUR-GC-EMAIL"
GARMIN_PASS="YOUR-GC-PASSWORD"
STRAVA_CLIENT_ID="YOUR-CLIENT-ID"
STRAVA_CLIENT_SECRET="YOUR-CLIENT-SECRET"
STRAVA_REDIRECT_URI="http://localhost"
TODOIST_SECTION_ID="TODOIST-SECTION-ID"
TODOIST_PROJECT_ID="TODOIST-PROJECT-ID"
TODOIST_API_TOKEN="YOUR-TODOIST-TOKEN"
```

## Run the Project Files

Garmin Connect:
The file holds functions related to Garmin Connect operations, and running the script will create follow-up tasks in Todoist for today's activities that have not yet been processed.

```bash
python garmin_connect.py
```

Strava:
The file holds functions related to Strava operations, and running the script will output details on the activities completed on the days specified in the ACTIVITY_DAYS_RANGE variable from Strava.

```bash
python strava.py
```

MOWL Cycling:
The file holds functions related to MOWL Cycling operations. No main script logic.

```bash
python mowl_cycling.py
```

Comparison between Strava and Garmin:
The file holds functions related to comparing activities from Garmin Connect to Strava, and running the script will output any activities from Garmin Connect that are not in Strava for the days specified in the ACTIVITY_DAYS_RANGE variable.

```bash
python compare_strava_garmin.py
```

Sync between Strava and Garmin:
The file holds functions related to keeping track of activities synchronised from Strava to Garmin Connect, and running the script will synchronise activities of the type virtual ride from Strava to Garmin Connect.

```bash
python strava_garmin_sync.py
```

Testing:
The project has a tests directory. Currently, it only contains a test script for Garmin Connect functionality. It uses pytest with mocked APIs, so no there are no real Garmin Connect calls.

```bash
pytest -v tests/test_garmin_connect.py
```
